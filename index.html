<!DOCTYPE html>
<html manifest="offline.manifest">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">		
	<title>Kisses</title>
	<link rel="stylesheet" type="text/css" href="./styles.css">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">	
	<link rel="apple-touch-icon" href="/icons8-cyclist-48-blue-background.png">	
</head>
<body>
	<button>Add Day</button>
	<div id='container'></div>


	<script type="text/javascript">
const divContainer = document.getElementById('container');
const addDay = document.getElementsByTagName('button')[0];

//array of objects for localStorage
let dayArray;

//initial loading
if (localStorage.getItem('kisses')) {
	dayArray = JSON.parse(localStorage.getItem('kisses'));

	//clear up local storage after 2 days
	if (dayArray.length >= 3) {
		dayArray.length = 2;
		localStorage.setItem('kisses', JSON.stringify(dayArray));
	}

	//create html elements for data
	let div = document.createElement('div');
	let h1Day = document.createElement('h1');
	let h2TotalKisses = document.createElement('h2');
	let buttonAddKiss = document.createElement('button');
	buttonAddKiss.appendChild(document.createTextNode('Add Kiss'));

	div.appendChild(h1Day);
	div.appendChild(h2TotalKisses);
	div.appendChild(buttonAddKiss);

	divContainer.insertAdjacentElement('afterbegin', div);

	h1Day.appendChild(document.createTextNode(dayArray[0].day));

	h2TotalKisses.appendChild(document.createTextNode(`${dayArray[0].kisses} /15`))

	//add kiss button
	buttonAddKiss.addEventListener('click', () => {
		dayArray[0].kisses = dayArray[0].kisses + 1;
		while (h2TotalKisses.firstChild) {
			h2TotalKisses.removeChild(h2TotalKisses.firstChild);
		}
		h2TotalKisses.appendChild(document.createTextNode(`${dayArray[0].kisses} /15`));
		localStorage.setItem('kisses', JSON.stringify(dayArray));
	})

} else {
	dayArray = [];
}

addDay.addEventListener('click', () => {
	let div = document.createElement('div');
	let h1Day = document.createElement('h1');
	let h2TotalKisses = document.createElement('h2');
	let buttonAddKiss = document.createElement('button');
	buttonAddKiss.appendChild(document.createTextNode('Add Kiss'));

	div.appendChild(h1Day);
	div.appendChild(h2TotalKisses);
	div.appendChild(buttonAddKiss);

	divContainer.insertAdjacentElement('afterbegin', div);

	//add new day
	let newDay = '';
	if (dayArray.length == 0) {
		newDay = 'Monday';
	} else if (dayArray[0].day == 'Monday') {
		newDay = 'Tuesday';
	} else if (dayArray[0].day == 'Tuesday') {
		newDay = 'Wednesday';
	} else if (dayArray[0].day == 'Wednesday') {
		newDay = 'Thursday';
	} else if (dayArray[0].day == 'Thursday') {
		newDay = 'Friday';
	} else if (dayArray[0].day == 'Friday') {
		newDay = 'Saturday';
	} else if (dayArray[0].day == 'Saturday') {
		newDay = 'Sunday';
	} else if (dayArray[0].day == 'Sunday') {
		newDay = 'Monday';
	}
	h1Day.appendChild(document.createTextNode(newDay));

	h2TotalKisses.appendChild(document.createTextNode('0/15'))

	dayArray = [{
		day: newDay,
		kisses: 0
	}].concat(dayArray);
	localStorage.setItem('kisses', JSON.stringify(dayArray));

	//add kiss
	buttonAddKiss.addEventListener('click', () => {
		dayArray[0].kisses = dayArray[0].kisses + 1;
		while (h2TotalKisses.firstChild) {
			h2TotalKisses.removeChild(h2TotalKisses.firstChild);
		}
		h2TotalKisses.appendChild(document.createTextNode(`${dayArray[0].kisses} /15`));
		localStorage.setItem('kisses', JSON.stringify(dayArray));
	})
})		
	</script>
</body>
</html>